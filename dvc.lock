schema: '2.0'
stages:
  download_data:
    cmd: python src/data/download_data.py
    deps:
    - path: src/data/download_data.py
      md5: a253f2456a52024015034e909fcddbb0
      size: 809
    outs:
    - path: data/raw/annotations.csv
      md5: e16179b0438f32222098fa82261cc1e7
      size: 15787
    - path: data/raw/images
      md5: a9a25050ebbf88b8188d804e54c27600.dir
      size: 12808659
      nfiles: 433
    - path: data/raw/plates.csv
      md5: 230a14f00bece9df11719b3e04ac8210
      size: 7380
  make_dataset:
    cmd: python src/data/make_dataset.py
    deps:
    - path: data/raw/annotations.csv
      md5: e16179b0438f32222098fa82261cc1e7
      size: 15787
    - path: data/raw/images
      md5: a9a25050ebbf88b8188d804e54c27600.dir
      size: 12808659
      nfiles: 433
    - path: data/raw/plates.csv
      md5: 230a14f00bece9df11719b3e04ac8210
      size: 7380
    - path: src/data/make_dataset.py
      md5: 2cde6eca6db6a8729ac232757479a706
      size: 2980
    params:
      params.yaml:
        random_seed: 42
    outs:
    - path: data/processed/test
      md5: 22a16789f61f67221776c4805359f398.dir
      size: 2584110
      nfiles: 88
    - path: data/processed/train
      md5: 052c35f5225bdc40392f1e782789e01b.dir
      size: 9000032
      nfiles: 305
    - path: data/processed/validation
      md5: 95a74dab37061a91ea7f893d4bfae23b.dir
      size: 1238510
      nfiles: 43
  train_model:
    cmd: python src/models/train_model.py
    deps:
    - path: data/processed
      md5: c0f4a539f51d45fab131f51c2a41b851.dir
      size: 12822673
      nfiles: 437
    - path: src/models/get_model.py
      md5: 669ccdbc8ce5c688aafa980410bc6b2a
      size: 1837
    - path: src/models/model_trainer.py
      md5: d87d325280d667e4794b54f644a80269
      size: 2288
    - path: src/models/train_model.py
      md5: a2756d37cf784ce1aef4b63f837762f3
      size: 1021
    params:
      params.yaml:
        train:
          epochs: 100
          save_every_n_epochs: 10
          model_name: iou_v2
          model_version: 1
          dropout: 0.4
          cnn_blocks: 5
          filters_num: 64
          filters_kernel_size: (2,2)
